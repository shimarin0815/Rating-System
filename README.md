# レーティングシステム — Single-File SPA

> **ひとことで**: 1枚の`index.html`だけで動く、5段階評価アプリ。アイテムの追加・検索・並び替え・統計・エクスポート/インポートを、ブラウザだけで完結。

---

## 目次

* [特徴](#特徴)
* [クイックスタート](#クイックスタート)
* [使い方](#使い方)
* [主な画面とUI](#主な画面とui)
* [データの扱い（保存・エクスポート/インポート）](#データの扱い保存エクスポートインポート)
* [よくある用途例](#よくある用途例)
* [設計メモ（技術）](#設計メモ技術)
* [カスタマイズ例](#カスタマイズ例)
* [アクセシビリティ](#アクセシビリティ)
* [トラブルシュート](#トラブルシュート)
* [FAQ](#faq)
* [ライセンス](#ライセンス)

---

## 特徴

* **1ファイル完結**: `index.html`だけ。ビルド不要/依存極小（Tailwind CDN & Google Fonts）。
* **5段階評価**: ⭐1〜5 をクリックで即時保存。履歴から平均を自動算出。
* **気持ちいいUI**: ガラス風カード、ふわっと出るアニメーション、ダークモード対応（OSに追従）。
* **検索/並び替え**: テキスト検索、`新しい順 / 高評価順 / 名前順`。
* **統計**: 件数、評価済み数、全体平均、平均Top3を表示。
* **データを持ち出し/持ち込み**: JSONでエクスポート/インポート。
* **永続化**: ブラウザの`localStorage`に自動保存。ページを閉じても残る。

---

## クイックスタート

### 必要なもの

* ブラウザ（最新のChrome / Edge / Firefox / Safari のいずれか）
* 任意: VS Code（推奨）

### 手順（最短）

1. このリポジトリ（または配布物）から **`index.html`** を入手。
2. ファイルをダブルクリックしてブラウザで開く。

### VS Codeで快適に開く（推奨）

1. VS Codeで`index.html`を保存。
2. 拡張機能 **Live Server** を入れて `Go Live` をクリック。
3. ブラウザが自動で開き、保存のたびにリロードされます。

> **ネット接続について**: 初回表示時、TailwindとフォントをCDNから読み込みます。オフラインでも動作はしますが、フォントが既定に切り替わる場合があります。

---

## 使い方

1. **アイテムを追加**: 名前（必須）・カテゴリ（任意）・メモ（任意）→「追加」。
2. **評価**: カードの⭐をクリック（1〜5）。押すたびに履歴が残り、平均が更新されます。
3. **検索**: 画面上部の検索欄に文字を入れて絞り込み。
4. **並び替え**: プルダウンから「新しい順 / 高評価順 / 名前順」。
5. **統計**: 「統計を見る」で全体平均とTop3を確認。
6. **編集/削除**: 各カードの「編集」「削除」から。
7. **エクスポート**: 右上「データをエクスポート」でJSONを保存。
8. **インポート**: 「インポート」からJSONを読み込み（既存データは置き換わります）。
9. **全消去**: 「全消去」でlocalStorageをクリア（元に戻せません）。

---

## 主な画面とUI

* **ヘッダー**: アプリ名／エクスポート／インポート／全消去。
* **コントロール**: 検索、並び替え、統計ボタン。
* **追加フォーム**: 「名前」「カテゴリ」「メモ」→追加。
* **リスト**: 各アイテムカード（名前・カテゴリ・メモ・作成日時・⭐・平均・編集/削除）。
* **統計ダイアログ**: 件数、評価済み数、全体平均、平均Top3。

---

## データの扱い（保存・エクスポート/インポート）

* **保存先**: ブラウザの`localStorage`（キー: `ratingAppV1`）。
* **エクスポート形式（JSON配列）**

  ```json
  [
    {
      "id": "abc123xy",
      "name": "アイテム名",
      "category": "カテゴリ",
      "note": "メモ",
      "rating": 4,
      "history": [{ "v": 4, "t": 1710000000000 }],
      "createdAt": 1710000000000
    }
  ]
  ```

  * `v`: 付けた星（1〜5）
  * `t`: 付与時刻（UNIXミリ秒）
* **インポート**: 上記構造のJSON配列を読み込みます。構造が不正な場合はエラーになります。

> **注意**: シークレットモード・別ブラウザ・別PCではlocalStorageが共有されません。

---

## よくある用途例

* 作品のセルフレビュー（良かった点/改善点をメモ）
* 学習リソースの仕分け（役立ち度で並べ替え）
* アイデアの優先度決め（Impact/工数の簡易メモと合わせて）
* お店・スポットのレビュー（後で共有しやすい）
* 日々の満足度ログ（ふりかえりで平均を確認）

---

## 設計メモ（技術）

* **アーキテクチャ**: 純HTML + Vanilla JSで構築したSPA。ルーティングは不要なため非採用。
* **スタイル**: Tailwind CSS（CDN）＋一部カスタムCSS。ダークモードは`prefers-color-scheme`で自動切替。
* **状態管理**: 単純な配列`items`を`localStorage`へシリアライズ。基本操作は`render()`で全体再描画（規模が小さいため十分高速）。
* **アクセシビリティ**: ⭐は`role="radiogroup"`/`role="radio"`を使用。タイトル、ボタンに適切な`title`/`aria-checked`を付与。
* **セキュリティ**: 表示時に`escapeHtml`でメモ等のXSSを軽減。外部送信は行いません。

---

## カスタマイズ例

* **星の段階を変更**: `for (let i = 1; i <= 5; i++)` の上限値を変更。
* **並び替え基準の追加**: `<select id="sort">`に`<option>`追加→JSの`switch`にケースを追加。
* **フィールド追加**（例: URL）: 追加フォームに`input`を足し、保存するオブジェクトにプロパティを追加、カード表示にも反映。
* **テーマカラー**: `<style>`の背景グラデやTailwindクラスを編集。

---

## アクセシビリティ

* キーボード操作: `Tab`で星ボタンにフォーカス→`Enter`/`Space`で評価。
* 画面読み上げ: `role`と`aria-checked`により現在の評価を把握可能。
* コントラスト: ダーク/ライト双方で十分なコントラストを維持（必要に応じてクラス調整）。

---

## トラブルシュート

* **画面が真っ白**: コピペ時の全角/半角混在やタグ抜けを確認。ブラウザのコンソール（F12）でエラーをチェック。
* **フォントが反映されない**: オフライン時は既定フォントに切り替わることがあります（機能上の問題はありません）。
* **データが見当たらない**: 別ブラウザ/シークレットモードではlocalStorageが別領域です。
* **インポートでエラー**: JSONの最上位が配列になっているか、各要素に`id/name/history/createdAt`があるか確認。

---

## FAQ

**Q. バックアップはどう取ればいい？**
A. 右上の「データをエクスポート」でJSONを保存してください。復元は「インポート」でファイルを選ぶだけ。

**Q. 複数端末で同期できますか？**
A. いいえ。localStorageは端末ごとに分かれています。Git/クラウドストレージでJSONを共有すると便利です。

**Q. 星の平均以外（中央値など）も見たい**
A. 可能です。`統計`計算部分に中央値・分散などを追加してください（実装ガイドはIssue/PRへ）。

**Q. 共有リンクは作れますか？**
A. 現行はオフライン前提でURL共有は未対応です。要望が多ければURLパラメータ/Hashルータで導入可能です。

---

## ライセンス

* 個人利用・教育目的での利用は自由です。再配布や改変版の公開時は、元プロジェクトへのクレジット表記をお願いします。

---

### メンテナ

* デザイン/UX: ガラス感・やわらかアニメ・現代的タイポグラフィ
* 推奨環境: 最新ブラウザ、VS Code + Live Server
* 連絡: Issueやコメントでフィードバックを歓迎します 🙌
